<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · CompatHelper.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://JuliaRegistries.github.io/CompatHelper.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>CompatHelper.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li></ul></li><li><a class="tocitem" href="options/">Configuration Options</a></li><li><a class="tocitem" href="acknowledgements/">Acknowledgements</a></li><li><a class="tocitem" href="other-environments/">Other Environments</a></li><li><a class="tocitem" href="troubleshooting/">TroubleShooting</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaRegistries/CompatHelper.jl/blob/master/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><article class="docstring"><header><a class="docstring-binding" id="CompatHelper.main" href="#CompatHelper.main"><code>CompatHelper.main</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">main(
    env::AbstractDict=ENV,
    ci_cfg::CIService=auto_detect_ci_service(; env=env);
    entry_type::EntryType=KeepEntry(),
    registries::Vector{Pkg.RegistrySpec}=DEFAULT_REGISTRIES,
    use_existing_registries::Bool=false,
    depot::String=DEPOT_PATH[1],
    subdirs::AbstractVector{&lt;:AbstractString}=[&quot;&quot;],
    master_branch::Union{DefaultBranch,AbstractString}=DefaultBranch(),
    bump_compat_containing_equality_specifier=true,
    pr_title_prefix::String=&quot;&quot;,
    include_jll::Bool=false,
    unsub_from_prs=false,
    cc_user=false,
    bump_version=false,
    include_yanked=false,
)</code></pre><p>Main entry point for the package.</p><p><strong>Arguments</strong></p><ul><li><code>env::AbstractDict=ENV</code>: Optional dictionary of environment variables, see README for overview</li><li><code>ci_cfg::CIService=auto_detect_ci_service(; env=env)</code>: CI Configuration, default to what is auto-detected</li></ul><p><strong>Keywords</strong></p><ul><li><code>entry_type::EntryType=KeepEntry()</code>: How to handle bumps for entry types</li><li><code>registries::Vector{Pkg.RegistrySpec}=DEFAULT_REGISTRIES</code>: RegistrySpec of all registries to use</li><li><code>use_existing_registries::Bool=false</code>: Specify whether to use the registries available at the <code>depot</code> location</li><li><code>depot::String=DEPOT_PATH[1]</code>: The user depot path to use</li><li><code>subdirs::AbstractVector{&lt;:AbstractString}=[&quot;&quot;]</code>: Subdirectories for nested packages</li><li><code>master_branch::Union{DefaultBranch,AbstractString}=DefaultBranch()</code>: Name of the master branch</li><li><code>bump_compat_containing_equality_specifier=true</code>: Bump compat entries with equality specifiers</li><li><code>pr_title_prefix::String=&quot;&quot;</code>: Prefix for pull request titles</li><li><code>include_jll::Bool=false</code>: Include JLL packages to bump</li><li><code>unsub_from_prs=false</code>: Unsubscribe the user from the pull requests</li><li><code>cc_user=false</code>: CC the user on the pull requests</li><li><code>bump_version=false</code>: When set to true, the version in Project.toml will be bumped if a pull request is made. Minor bump if &gt;= 1.0, or patch bump if &lt; 1.0</li><li><code>include_yanked=false</code>: When set to true, yanked versions will be included when calculating what the latest version of a package is</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaRegistries/CompatHelper.jl/blob/370e3db84398bfab22609760a3a1c07625a5e6a7/src/main.jl#L1-L40">source</a></section></article><h1 id="[CompatHelper.jl](https://github.com/JuliaRegistries/CompatHelper.jl)"><a class="docs-heading-anchor" href="#[CompatHelper.jl](https://github.com/JuliaRegistries/CompatHelper.jl)"><a href="https://github.com/JuliaRegistries/CompatHelper.jl">CompatHelper.jl</a></a><a id="[CompatHelper.jl](https://github.com/JuliaRegistries/CompatHelper.jl)-1"></a><a class="docs-heading-anchor-permalink" href="#[CompatHelper.jl](https://github.com/JuliaRegistries/CompatHelper.jl)" title="Permalink"></a></h1><p>CompatHelper is a Julia package that helps you keep your <code>[compat]</code> entries up-to-date. Whenever one of your package&#39;s dependencies releases a new breaking version, CompatHelper opens a pull request on your repository that modifies your <code>[compat]</code> entry to reflect the newly released version. We would like to eventually add Julia support to <a href="https://dependabot.com">Dependabot</a>. If you would like to help with adding Julia support to Dependabot, join us in the <code>#dependabot</code> channel on the <a href="https://julialang.org/slack/">Julia Language Slack</a>.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><h3 id="GitHub"><a class="docs-heading-anchor" href="#GitHub">GitHub</a><a id="GitHub-1"></a><a class="docs-heading-anchor-permalink" href="#GitHub" title="Permalink"></a></h3><p>Create a file at <code>.github/workflows/CompatHelper.yml</code> with the contents of the <a href="https://github.com/JuliaRegistries/CompatHelper.jl/blob/master/.github/workflows/CompatHelper.yml">CompatHelper.yml</a> that is included in this repository.</p><p>If you need to use any special arguments for the <code>main</code> function, you can modify this file to add them.</p><h3 id="GitLab"><a class="docs-heading-anchor" href="#GitLab">GitLab</a><a id="GitLab-1"></a><a class="docs-heading-anchor-permalink" href="#GitLab" title="Permalink"></a></h3><p>For GitLab you will want to add CompatHelper as a job in your <code>.gitlab-ci.yml</code> file such as:</p><pre><code class="language-yaml hljs">CompatHelper:
  image: julia:1.6 # Set to the Julia version you want to use
  stage: compat # You can place this in any stage that makes sense for your setup
  before_script:
    - apt-get update -qq &amp;&amp; apt-get install -y git
    - |
      julia --color=yes -e &quot;
        import Pkg;
        name = \&quot;CompatHelper\&quot;;
        uuid = \&quot;aa819f21-2bde-4658-8897-bab36330d9b7\&quot;;
        version = \&quot;3\&quot;;
        Pkg.add(; name, uuid, version)&quot;
  script:
    - |
      julia --color=yes -e &quot;
        import CompatHelper;
        CompatHelper.main()&quot;</code></pre><p>Similarly to the GitHub setup, you can modify the <code>main</code> call here if you need to change any of the default arguments. You must also remember to add the <code>GITLAB_TOKEN</code> and <code>COMPATHELPER_PRIV</code> CI secrets to the project so that CompatHelper can find them.</p><h4 id="Creating-SSH-Key"><a class="docs-heading-anchor" href="#Creating-SSH-Key">Creating SSH Key</a><a id="Creating-SSH-Key-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-SSH-Key" title="Permalink"></a></h4><p>If you use GitHub Actions to either test your package using continuous integration, or build and deploy documentation you will need to create an SSH deploy key. If you wish to reuse an existing SSH key simplify modify the workflow above environment variable to use <code>COMPATHELPER_PRIV: ${{ secrets.DOCUMENTER_KEY }}</code>. Otherwise follow the below instructions to generate a new key,</p><ol><li>Generate a new SSH key<ol><li><code>ssh-keygen -m PEM -N &quot;&quot; -f compathelper_key</code></li></ol></li><li>Create a new GitHub secret<ol><li>Copy the private key, <code>cat compathelper_key</code></li><li>Go to your repositories settings page</li><li>Select <code>Secrets</code>, and <code>New Repository Secret</code></li><li>Name the secret <code>COMPATHELPER_PRIV</code>, paste the copied private key</li></ol></li><li>Create a new deploy key<ol><li>Copy the public key, <code>cat compathelper_key.pub</code></li><li>Go to your repositories settings page</li><li>Select <code>Deploy Keys</code>, and <code>Add Deploy Key</code></li><li>Name the deploy key <code>COMPATHELPER_PUB</code>, paste in the copied public key</li><li>Ensure that the key has <code>Write Access</code></li></ol></li><li>Cleanup the SSH key from your computer, <code>rm -f compathelper_key compathelper_key.pub</code></li></ol><h5 id="Base64-SSH-Public-Key"><a class="docs-heading-anchor" href="#Base64-SSH-Public-Key">Base64 SSH Public Key</a><a id="Base64-SSH-Public-Key-1"></a><a class="docs-heading-anchor-permalink" href="#Base64-SSH-Public-Key" title="Permalink"></a></h5><p>CompatHelper also supports Base64 encoded SSH Public Keys. One reason for this would be for GitLab usage. On GitLab, if you add an SSH privary key to the CI secrets, if for any reason it prints out, it will show up in the log in plain text. To fix this, you can encode the private key in Base64 which is a format that GitLab can mask in log files.</p><p>Once you have created your SSH Public Key as mentioned above, before you delete it, you can convert it to Base64 like so:</p><pre><code class="language-bash hljs">openssl enc -base64 -in compathelper_key.pub -out compathelper_key.pub.base64</code></pre><p>You can then use the Base64 version in your CI Secret rather than the plain text version. Once that is done, you can delete it from your computer.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="options/">Configuration Options »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 24 September 2024 01:09">Tuesday 24 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
